<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>El lenguaje es...</title>
  <script src="https://unpkg.com/hydra-synth"></script>

  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      height: 100%;
      background: black;
    }

    .container {
      position: relative;
      width: 100%;
      height: 100%;
    }

    .background-text {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      text-align: center;
      font-size: 6em;
      color: rgba(255, 255, 255, 0.15);
      z-index: 1;
      pointer-events: none;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Courier New', monospace;
      font-weight: 300;
      letter-spacing: 0.1em;
      line-height: .6;
    }

    canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: 0;
    }

    #input {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      width: 80%;
      max-width: 600px;
      height: 80px;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      font-size: 18px;
      border: 2px solid white;
      border-radius: 10px;
      padding: 10px;
      z-index: 10;
      backdrop-filter: blur(4px);
      resize: none;
    }
  </style>
</head>

<body>

  <div class="container">
    <div class="background-text">xx xxxxxxxx xx xx xxxxxxxxxxxx xx xxxxxxxxxxxxx.</div>
  </div>

  <textarea id="input" placeholder="El lenguaje es..."></textarea>

<script>
const hydra = new Hydra({ detectAudio: false });


// =======================================================
// OBJETO DE PALABRAS (igual al que ya tenÃ­as, no repetido aquÃ­)
// =======================================================

const palabras = { /* ...tus funciones tal cual van aquÃ­... */ };



// =======================================================
//   ðŸ”¥ COMBINACIÃ“N REAL DE CAPAS ENTRE PALABRAS ðŸ”¥
// =======================================================

const input = document.getElementById("input");

input.addEventListener("input", () => {
  const texto = input.value.toLowerCase().trim();

  if (texto === "") {
    hush();
    solid(0,0,0).out();
    return;
  }

  const palabrasActivas = texto
    .split(/\s+/)
    .map(w => w.trim())
    .filter(w => palabras[w]);

  if (palabrasActivas.length === 0) return;


  // ===================================================
  // 1) Primera palabra â†’ base
  // ===================================================
  let base = palabras[palabrasActivas[0]]();
  base.out(o1);


  // ===================================================
  // 2) Capas adicionales: mezcla aditiva suave + layering
  // ===================================================
  for (let i = 1; i < palabrasActivas.length; i++) {

    let capa = palabras[palabrasActivas[i]]();

    let mezcla = 0.25 + 0.25 * Math.sin(time * 0.5);  
    // mezcla dinÃ¡mica que respira

    capa
      .blend(src(o1), mezcla)  // mezcla suave
      .layer(src(o1))          // superposiciÃ³n
      .out(o1);
  }


  // ===================================================
  // 3) Salida final
  // ===================================================
  src(o1).out(o0);
});
</script>

</body>
</html>











